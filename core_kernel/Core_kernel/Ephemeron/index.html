<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.2.0" />
<title>Ephemeron (core_kernel.Core_kernel.Ephemeron)</title>
<link rel="stylesheet" href="../../../odoc.css" />
<meta charset="utf-8" />
<meta name="viewport" content=
"width=device-width,initial-scale=1.0" />
<script src="../../../highlight.pack.js">
</script>
<script>
<![CDATA[
hljs.initHighlightingOnLoad();
]]>
</script>
</head>
<body>
<div class="content">
<header>
<nav><a href="../index.html">Up</a> – <a href=
"../../index.html">core_kernel</a> » <a href=
"../index.html">Core_kernel</a> » Ephemeron</nav>
<h1>Module <code>Core_kernel.Ephemeron</code></h1>
<p>An ephemeron is a pair of pointers, one to a "key" and one to
"data".</p>
<p>The key pointer is a weak pointer: the garbage collector doesn't
follow it when determining liveness. The garbage collector follows
an ephemeron's data pointer iff the key is alive. If the garbage
collector nulls an ephemeron's weak pointer then it also nulls the
data pointer. Ephemerons are more powerful than weak pointers
because they express conjunction of liveness -- the data in an
ephemeron is live iff both the key <em>and</em> the ephemeron are
live. See "Ephemerons: A New Finalization Mechanism", Barry Hayes
1997.</p>
<p>This module is like the OCaml standard library module
<code>Ephemerons.K1</code>, except that it requires that the keys
and data are heap blocks.</p>
</header>
<dl>
<dt class="spec type" id="type-t"><a href="#type-t" class=
"anchor"></a><code><span class="keyword">type</span> ('a, 'b)
t</code></dt>
</dl>
<div>
<div class="spec include">
<div class="doc">
<details open="open">
<summary><span class="def"><code><span class=
"keyword">include</span> <span class="keyword">sig</span> ...
<span class="keyword">end</span></code></span></summary>
<dl>
<dt class="spec value" id="val-sexp_of_t"><a href="#val-sexp_of_t"
class="anchor"></a><code><span class="keyword">val</span> sexp_of_t
: (<span class="type-var">'a</span> <span>-&gt;</span> <a href=
"../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a>)
<span>-&gt;</span> (<span class="type-var">'b</span>
<span>-&gt;</span> <a href=
"../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a>)
<span>-&gt;</span> (<span class=
"type-var">'a</span>,&nbsp;<span class="type-var">'b</span>)
<a href="index.html#type-t">t</a> <span>-&gt;</span> <a href=
"../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt>
</dl>
</details>
</div>
</div>
</div>
<dl>
<dt class="spec value" id="val-create"><a href="#val-create" class=
"anchor"></a><code><span class="keyword">val</span> create :
<a href=
"../../Core_kernel__/Import/index.html#type-unit">Core_kernel__.Import.unit</a>
<span>-&gt;</span> (<span class=
"type-var">_</span>,&nbsp;<span class="type-var">_</span>) <a href=
"index.html#type-t">t</a></code></dt>
<dt class="spec value" id="val-set_key"><a href="#val-set_key"
class="anchor"></a><code><span class="keyword">val</span> set_key :
(<span class="type-var">'a</span>,&nbsp;<span class=
"type-var">_</span>) <a href="index.html#type-t">t</a>
<span>-&gt;</span> <span class="type-var">'a</span> <a href=
"../Heap_block/index.html#type-t">Heap_block.t</a> <a href=
"../../Core_kernel__/Import/index.html#type-option">Core_kernel__.Import.option</a>
<span>-&gt;</span> <a href=
"../../Core_kernel__/Import/index.html#type-unit">Core_kernel__.Import.unit</a></code></dt>
<dt class="spec value" id="val-get_key"><a href="#val-get_key"
class="anchor"></a><code><span class="keyword">val</span> get_key :
(<span class="type-var">'a</span>,&nbsp;<span class=
"type-var">_</span>) <a href="index.html#type-t">t</a>
<span>-&gt;</span> <span class="type-var">'a</span> <a href=
"../Heap_block/index.html#type-t">Heap_block.t</a> <a href=
"../../Core_kernel__/Import/index.html#type-option">Core_kernel__.Import.option</a></code></dt>
<dt class="spec value" id="val-set_data"><a href="#val-set_data"
class="anchor"></a><code><span class="keyword">val</span> set_data
: (<span class="type-var">_</span>,&nbsp;<span class=
"type-var">'b</span>) <a href="index.html#type-t">t</a>
<span>-&gt;</span> <span class="type-var">'b</span> <a href=
"../Heap_block/index.html#type-t">Heap_block.t</a> <a href=
"../../Core_kernel__/Import/index.html#type-option">Core_kernel__.Import.option</a>
<span>-&gt;</span> <a href=
"../../Core_kernel__/Import/index.html#type-unit">Core_kernel__.Import.unit</a></code></dt>
<dt class="spec value" id="val-get_data"><a href="#val-get_data"
class="anchor"></a><code><span class="keyword">val</span> get_data
: (<span class="type-var">_</span>,&nbsp;<span class=
"type-var">'b</span>) <a href="index.html#type-t">t</a>
<span>-&gt;</span> <span class="type-var">'b</span> <a href=
"../Heap_block/index.html#type-t">Heap_block.t</a> <a href=
"../../Core_kernel__/Import/index.html#type-option">Core_kernel__.Import.option</a></code></dt>
<dt class="spec value" id="val-is_key_some"><a href=
"#val-is_key_some" class="anchor"></a><code><span class=
"keyword">val</span> is_key_some : (<span class=
"type-var">_</span>,&nbsp;<span class="type-var">_</span>) <a href=
"index.html#type-t">t</a> <span>-&gt;</span> <a href=
"../../Core_kernel__/Import/index.html#type-bool">Core_kernel__.Import.bool</a></code></dt>
<dt class="spec value" id="val-is_key_none"><a href=
"#val-is_key_none" class="anchor"></a><code><span class=
"keyword">val</span> is_key_none : (<span class=
"type-var">_</span>,&nbsp;<span class="type-var">_</span>) <a href=
"index.html#type-t">t</a> <span>-&gt;</span> <a href=
"../../Core_kernel__/Import/index.html#type-bool">Core_kernel__.Import.bool</a></code></dt>
<dt class="spec value" id="val-is_data_some"><a href=
"#val-is_data_some" class="anchor"></a><code><span class=
"keyword">val</span> is_data_some : (<span class=
"type-var">_</span>,&nbsp;<span class="type-var">_</span>) <a href=
"index.html#type-t">t</a> <span>-&gt;</span> <a href=
"../../Core_kernel__/Import/index.html#type-bool">Core_kernel__.Import.bool</a></code></dt>
<dt class="spec value" id="val-is_data_none"><a href=
"#val-is_data_none" class="anchor"></a><code><span class=
"keyword">val</span> is_data_none : (<span class=
"type-var">_</span>,&nbsp;<span class="type-var">_</span>) <a href=
"index.html#type-t">t</a> <span>-&gt;</span> <a href=
"../../Core_kernel__/Import/index.html#type-bool">Core_kernel__.Import.bool</a></code></dt>
</dl>
</div>
</body>
</html>
