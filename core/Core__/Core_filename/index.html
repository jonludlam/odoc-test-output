<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.2.0" />
<title>Core_filename (core.Core__.Core_filename)</title>
<link rel="stylesheet" href="../../../odoc.css" />
<meta charset="utf-8" />
<meta name="viewport" content=
"width=device-width,initial-scale=1.0" />
<script src="../../../highlight.pack.js">
</script>
<script>
<![CDATA[
hljs.initHighlightingOnLoad();
]]>
</script>
</head>
<body>
<div class="content">
<header>
<nav><a href="../index.html">Up</a> – <a href=
"../../index.html">core</a> » <a href="../index.html">Core__</a> »
Core_filename</nav>
<h1>Module <code>Core__.Core_filename</code></h1>
</header>
<aside>
<p>Warning! this library assumes we are in a POSIX compliant
OS.</p>
</aside>
<div>
<div class="spec include">
<div class="doc">
<details open="open">
<summary><span class="def"><code><span class=
"keyword">include</span> <span class="keyword">module</span>
<span class="keyword">type</span> <span class="keyword">of</span>
<a href=
"../../../core_kernel/Core_kernel/index.html#module-Filename">Core_kernel.Filename</a></code></span></summary>
<dl>
<dt class="spec value" id="val-root"><a href="#val-root" class=
"anchor"></a><code><span class="keyword">val</span> root : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p>The path of the root.</p>
</dd>
</dl>
<section>
<header>
<h3 id="pathname-resolution"><a href="#pathname-resolution" class=
"anchor"></a>Pathname resolution</h3>
</header>
<dl>
<dt class="spec value" id="val-is_posix_pathname_component">
<a href="#val-is_posix_pathname_component" class=
"anchor"></a><code><span class="keyword">val</span>
is_posix_pathname_component : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-bool">Core_kernel__.Import.bool</a></code></dt>
<dd>
<p><code>is_posix_pathname_component f</code></p>
<dl>
<dt>returns</dt>
<dd>
<p>true if <code>f</code> is a valid path component on a POSIX
compliant OS</p>
<p>Note that this checks a path component, and not a full path.</p>
<p>
http://www.opengroup.org/onlinepubs/000095399/basedefs/xbd_chap03.html#tag_03_169</p>
</dd>
</dl>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-temp_dir_name"><a href=
"#val-temp_dir_name" class="anchor"></a><code><span class=
"keyword">val</span> temp_dir_name : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p>The name of the temporary directory:</p>
<p>Under Unix, the value of the <code>TMPDIR</code> environment
variable, or "/tmp" if the variable is not set.</p>
<p>Under Windows, the value of the <code>TEMP</code> environment
variable, or "." if the variable is not set.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-current_dir_name"><a href=
"#val-current_dir_name" class="anchor"></a><code><span class=
"keyword">val</span> current_dir_name : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p>The conventional name for the current directory (e.g.
<code>.</code> in Unix).</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-parent_dir_name"><a href=
"#val-parent_dir_name" class="anchor"></a><code><span class=
"keyword">val</span> parent_dir_name : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p>The conventional name for the parent of the current directory
(e.g. <code>..</code> in Unix).</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-dir_sep"><a href="#val-dir_sep"
class="anchor"></a><code><span class="keyword">val</span> dir_sep :
<a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p>The directory separator (e.g. <code>/</code> in Unix).</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-concat"><a href="#val-concat" class=
"anchor"></a><code><span class="keyword">val</span> concat :
<a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p><code>concat p1 p2</code> returns a path equivalent to <code>p1
^ "/" ^ p2</code>. In the resulting path p1 (resp. p2) has all its
trailing (resp. leading) "." and "/" removed. eg: concat "a/."
".//b" =&gt; "a/b" concat "." "b" =&gt; "./b" concat "a" "." =&gt;
"a/." concat "a" "/b" =&gt; "a/b"</p>
<p>@throws Failure if <code>p1</code> is empty.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-is_relative"><a href=
"#val-is_relative" class="anchor"></a><code><span class=
"keyword">val</span> is_relative : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-bool">Core_kernel__.Import.bool</a></code></dt>
<dd>
<p>Return <code>true</code> if the file name is relative to the
current directory, <code>false</code> if it is absolute (i.e. in
Unix, starts with <code>/</code>).</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-is_absolute"><a href=
"#val-is_absolute" class="anchor"></a><code><span class=
"keyword">val</span> is_absolute : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-bool">Core_kernel__.Import.bool</a></code></dt>
<dt class="spec value" id="val-is_implicit"><a href=
"#val-is_implicit" class="anchor"></a><code><span class=
"keyword">val</span> is_implicit : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-bool">Core_kernel__.Import.bool</a></code></dt>
<dd>
<p>Return <code>true</code> if the file name is relative and does
not start with an explicit reference to the current directory
(<code>./</code> or <code>../</code> in Unix), <code>false</code>
if it starts with an explicit reference to the root directory or
the current directory.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-check_suffix"><a href=
"#val-check_suffix" class="anchor"></a><code><span class=
"keyword">val</span> check_suffix : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-bool">Core_kernel__.Import.bool</a></code></dt>
<dd>
<p><code>check_suffix name suff</code> returns <code>true</code> if
the filename <code>name</code> ends with the suffix
<code>suff</code>.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-chop_suffix"><a href=
"#val-chop_suffix" class="anchor"></a><code><span class=
"keyword">val</span> chop_suffix : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p><code>chop_suffix name suff</code> removes the suffix
<code>suff</code> from the filename <code>name</code>. The behavior
is undefined if <code>name</code> does not end with the suffix
<code>suff</code>.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-chop_extension"><a href=
"#val-chop_extension" class="anchor"></a><code><span class=
"keyword">val</span> chop_extension : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p>Return the given file name without its extension. The extension
is the shortest suffix starting with a period and not including a
directory separator, <code>.xyz</code> for instance.</p>
<p>Raise <code>Invalid_argument</code> if the given name does not
contain an extension.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-split_extension"><a href=
"#val-split_extension" class="anchor"></a><code><span class=
"keyword">val</span> split_extension : <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
* <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-option">Core_kernel__.Import.option</a></code></dt>
<dd>
<p><code>split_extension fn</code> return the portion of the
filename before the extension and the (optional) extension.
Example: split_extension "/foo/my_file" = ("/foo/my_file", None)
split_extension "/foo/my_file.txt" = ("/foo/my_file", Some "txt")
split_extension "/home/c.falls/my_file" = ("/home/c.falls/my_file",
None)</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-basename"><a href="#val-basename"
class="anchor"></a><code><span class="keyword">val</span> basename
: <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p>Respects the posix semantic.</p>
<p>Split a file name into directory name / base file name.
<code>concat (dirname name) (basename name)</code> returns a file
name which is equivalent to <code>name</code>. Moreover, after
setting the current directory to <code>dirname name</code> (with
<span class="xref-unresolved" title=
"unresolved reference to &quot;Sys.chdir&quot;"><code>Sys</code>.chdir</span>),
references to <code>basename name</code> (which is a relative file
name) designate the same file as <code>name</code> before the call
to <span class="xref-unresolved" title=
"unresolved reference to &quot;Sys.chdir&quot;"><code>Sys</code>.chdir</span>.</p>
<p>The result is not specified if the argument is not a valid file
name (for example, under Unix if there is a NUL character in the
string).</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-dirname"><a href="#val-dirname"
class="anchor"></a><code><span class="keyword">val</span> dirname :
<a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p>See <span class="xref-unresolved" title=
"unresolved reference to &quot;Filename.basename&quot;"><code>Filename</code>.basename</span>.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-split"><a href="#val-split" class=
"anchor"></a><code><span class="keyword">val</span> split :
<a href="../../../core_kernel/Core_kernel__/Import/index.html#type-string">
Core_kernel__.Import.string</a> <span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
* <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p><code>split filename</code> returns (dirname filename, basename
filename)</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-parts"><a href="#val-parts" class=
"anchor"></a><code><span class="keyword">val</span> parts :
<a href="../../../core_kernel/Core_kernel__/Import/index.html#type-string">
Core_kernel__.Import.string</a> <span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-list">Core_kernel__.Import.list</a></code></dt>
<dd>
<p><code>parts filename</code> returns a list of path components in
order. For instance: /tmp/foo/bar/baz -&gt; <code>"/"; "tmp";
"foo"; "bar"; "baz"</code>. The first component is always either
"." for relative paths or "/" for absolute ones.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-of_parts"><a href="#val-of_parts"
class="anchor"></a><code><span class="keyword">val</span> of_parts
: <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a>
<a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-list">Core_kernel__.Import.list</a>
<span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p><code>of_parts parts</code> joins a list of path components into
a path. It does roughly the opposite of <code>parts</code>, but
they fail to be precisely mutually inverse because of ambiguities
like multiple consecutive slashes and . components.</p>
<p>Raises an error if given an empty list.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-quote"><a href="#val-quote" class=
"anchor"></a><code><span class="keyword">val</span> quote :
<a href="../../../core_kernel/Core_kernel__/Import/index.html#type-string">
Core_kernel__.Import.string</a> <span>-&gt;</span> <a href=
"../../../core_kernel/Core_kernel__/Import/index.html#type-string">Core_kernel__.Import.string</a></code></dt>
<dd>
<p>Return a quoted version of a file name, suitable for use as one
argument in a command line, escaping all meta-characters. Warning:
under Windows, the output is only suitable for use with programs
that follow the standard Windows quoting conventions.</p>
<p>See <code>Sys.quote</code> for an alternative implementation
that is more human readable but less portable.</p>
</dd>
</dl>
</section>
</details>
</div>
</div>
</div>
<dl>
<dt class="spec value" id="val-realpath"><a href="#val-realpath"
class="anchor"></a><code><span class="keyword">val</span> realpath
: string <span>-&gt;</span> string</code></dt>
<dd>
<p><code>realpath path</code></p>
<dl>
<dt>returns</dt>
<dd>
<p>the canonicalized absolute pathname of <code>path</code>.</p>
</dd>
</dl>
<dl>
<dt>raises Unix_error</dt>
<dd>
<p>on errors.</p>
</dd>
</dl>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-open_temp_file"><a href=
"#val-open_temp_file" class="anchor"></a><code><span class=
"keyword">val</span> open_temp_file : ?⁠perm:int <span>-&gt;</span>
?⁠in_dir:string <span>-&gt;</span> string <span>-&gt;</span> string
<span>-&gt;</span> string * <a href=
"../../../stdio/Stdio/Out_channel/index.html#type-t">Core__.Import.Out_channel.t</a></code></dt>
<dd>
<p>Same as <a href=
"index.html#val-temp_file"><code>Core_filename.temp_file</code></a>,
but returns both the name of a fresh temporary file, and an output
channel opened (atomically) on this file. This function is more
secure than <code>temp_file</code>: there is no risk that the
temporary file will be modified (e.g. replaced by a symbolic link)
before the program opens it.</p>
</dd>
</dl>
<aside>
<p><code>temp_file ?perm ?in_dir_name prefix suffix</code></p>
<p>Returns the name of a fresh temporary file in the temporary
directory. The base name of the temporary file is formed by
concatenating prefix, then <code>.tmp.</code>, then a 6-digit hex
number, then suffix. The temporary file is created empty. The file
is guaranteed to be fresh, i.e. not already existing in the
directory.</p>
<dl>
<dt>parameter in_dir</dt>
<dd>
<p>the directory in which to create the temporary file. The default
is <code>temp_dir_name</code></p>
</dd>
</dl>
<dl>
<dt>parameter perm</dt>
<dd>
<p>the permission of the temporary file. The default value is
<code>0o600</code> (readable and writable only by the file
owner)</p>
<p>Note that prefix and suffix will be changed when necessary to
make the final filename valid POSIX.</p>
<p><code>temp_dir</code> is the same as <code>temp_file</code> but
creates a temporary directory.</p>
</dd>
</dl>
</aside>
<dl>
<dt class="spec value" id="val-temp_file"><a href="#val-temp_file"
class="anchor"></a><code><span class="keyword">val</span> temp_file
: ?⁠perm:int <span>-&gt;</span> ?⁠in_dir:string <span>-&gt;</span>
string <span>-&gt;</span> string <span>-&gt;</span>
string</code></dt>
<dt class="spec value" id="val-temp_dir"><a href="#val-temp_dir"
class="anchor"></a><code><span class="keyword">val</span> temp_dir
: ?⁠perm:int <span>-&gt;</span> ?⁠in_dir:string <span>-&gt;</span>
string <span>-&gt;</span> string <span>-&gt;</span>
string</code></dt>
<dt class="spec value" id="val-create_arg_type"><a href=
"#val-create_arg_type" class="anchor"></a><code><span class=
"keyword">val</span> create_arg_type : ?⁠key:<span class=
"type-var">'a</span> <a href=
"../../../core_kernel/Core_kernel__Univ_map/Multi/Key/index.html#type-t">
Core__.Import.Univ_map.Multi.Key.t</a> <span>-&gt;</span> (string
<span>-&gt;</span> <span class="type-var">'a</span>)
<span>-&gt;</span> <span class="type-var">'a</span> <a href=
"../../../core_kernel/Core_kernel__Command/Arg_type/index.html#type-t">
Core_kernel.Command.Arg_type.t</a></code></dt>
<dd>
<p><code>create_arg_type</code>'s resulting <code>Arg_type.t</code>
does bash autocompletion, via <code>compgen</code>.</p>
</dd>
</dl>
<dl>
<dt class="spec value" id="val-arg_type"><a href="#val-arg_type"
class="anchor"></a><code><span class="keyword">val</span> arg_type
: string <a href=
"../../../core_kernel/Core_kernel__Command/Arg_type/index.html#type-t">
Core_kernel.Command.Arg_type.t</a></code></dt>
<dd>
<p><code>arg_type</code> is <code>create_arg_type Fn.id</code></p>
</dd>
</dl>
</div>
</body>
</html>
